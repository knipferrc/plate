<div class="p-4">
  <h1 class="mb-4">{data.todoDetail.title}</h1>
  <h3 class="text-dark">{data.todoDetail.description}</h3>
</div>
<div class="flex flex-row flex-wrap">
  {#each data.todoDetail.todos as todo}
  <div
    class="bg-grey-lighter shadow rounded w-full sm:w-full md:w-full lg:w-1/5 m-2 sm:m-2 lg:m-4 p-4 flex-grow"
  >
    <div class="flex justify-between items-center">
      <div class="flex flex-col">
        <div class="text-xl font-bold">{todo.name}</div>
        <div>{todo.description}</div>
      </div>
      <i
        class="material-icons {todo.completed ? 'text-green' : 'text-grey-darker'}"
      >
        check_circle
      </i>
    </div>
  </div>
  {/each}
</div>

<script>
  export default {
    async preload({ params, query }) {
      const res = await this.fetch(`todos/${params.slug}.json`)
      const data = await res.json()

      if (res.status === 200) {
        return { data }
      } else {
        this.error(res.status, data.message)
      }
    }
  }
</script>
